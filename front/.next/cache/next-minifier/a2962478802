{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{RNiq:function(e,t,n){\"use strict\";n.r(t);var c=n(\"o0o1\"),a=n.n(c),i=n(\"q1tI\"),l=n.n(i),r=n(\"Vl3Y\"),o=n(\"5rEg\"),u=n(\"2/Rp\"),s=n(\"/MKj\"),p=n(\"p+NB\"),d=l.a.createElement,f=function(){var e=Object(s.b)(),t=Object(i.useState)(\"\"),n=t[0],c=t[1],a=Object(s.c)((function(e){return e.post})),l=a.imagePaths,f=a.isAddingPost,m=a.postAdded,b=Object(i.useRef)();Object(i.useEffect)((function(){m&&c(\"\")}),[m]);var h=Object(i.useCallback)((function(t){if(!n||!n.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var c=new FormData;l.forEach((function(e){c.append(\"image\",e)})),c.append(\"content\",n),e({type:p.e,data:c})}),[n,l]),g=Object(i.useCallback)((function(e){c(e.target.value)}),[]),v=Object(i.useCallback)((function(t){console.log(t.target.files);var n=new FormData;[].forEach.call(t.target.files,(function(e){n.append(\"image\",e)})),e({type:p.J,data:n})}),[]),w=Object(i.useCallback)((function(){b.current.click()}),[b.current]),y=Object(i.useCallback)((function(t){return function(){e({type:p.y,index:t})}}),[]);return d(r.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:h},d(o.a.TextArea,{maxLength:140,placeholder:\"\\ub0b4\\uc6a9\\uc744 \\uc785\\ub825\\ud558\\uc138\\uc694\",value:n,onChange:g}),d(\"div\",null,d(\"input\",{type:\"file\",multiple:!0,hidden:!0,ref:b,onChange:v}),d(u.a,{onClick:w},\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"),d(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:f},\"\\ub4f1\\ub85d\")),d(\"div\",null,l.map((function(e,t){return d(\"div\",{key:e,style:{display:\"inline-block\"}},d(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),d(\"div\",null,d(u.a,{onClick:y(t)},\"\\uc81c\\uac70\")))}))))},m=n(\"HSxB\"),b=l.a.createElement,h=function(){var e=Object(s.c)((function(e){return e.user})).me,t=Object(s.c)((function(e){return e.post})),n=t.mainPosts,c=t.hasMorePost,a=Object(s.b)(),l=Object(i.useRef)([]),r=Object(i.useCallback)((function(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&c){var e=n[n.length-1].id;l.current.includes(e)||(a({type:p.q,lastId:e}),l.current.push(e))}}),[c,n.length]);return Object(i.useEffect)((function(){return window.addEventListener(\"scroll\",r),function(){window.removeEventListener(\"scroll\",r)}}),[n.length]),b(\"div\",null,e&&b(f,null),n.map((function(e){return b(m.a,{key:e.id,post:e})})))};h.getInitialProps=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.store.dispatch({type:p.q});case 1:case\"end\":return t.stop()}}),null,null,null,Promise)};t.default=h},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,13,0,3,4,6,7,5,9,8,10,11,12]]]);"}